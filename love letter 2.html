<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Love Letter â€” For You</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --bg1: #f6d2ff;
        --bg2: #ffe8f0;
        --accent: #e84a66;
        --accent-2: #ff8aa2;
        --card: rgba(255,255,255,0.6);
        --glass-border: rgba(255,255,255,0.25);
      }

      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family: Poppins, system-ui, -apple-system, "Segoe UI", Roboto, "Dancing Script", cursive;
        background: linear-gradient(135deg,var(--bg1) 0%, #f7f0ff 30%, #fff 100%);
        display:flex;
        align-items:center;
        justify-content:center;
        padding:32px;
      }

      .page{max-width:980px;width:100%}
      .card{
        background: linear-gradient(135deg, rgba(255,255,255,0.6), rgba(255,255,255,0.35));
        border-radius:16px;
        padding:28px;
        box-shadow: 0 10px 40px rgba(20,12,46,0.12);
        border:1px solid var(--glass-border);
        text-align:center;
      }
      .title{font-family:'Dancing Script',cursive;font-size:32px;margin:0;color:#9b2b55}
      .subtitle{margin:6px 0 18px;color:#6b2b44;font-weight:500}

      .envlope-wrapper{display:flex;align-items:center;justify-content:center;padding:18px}
      #envelope{position:relative;width:320px;height:200px;border-radius:12px;background:linear-gradient(180deg,var(--accent) 0%,var(--accent-2) 100%);box-shadow:0 12px 40px rgba(232,74,102,0.28);transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);transform-origin:center center;}
      .front{position:absolute;width:0;height:0;z-index:3}
      .flap{border-left:160px solid transparent;border-right:160px solid transparent;border-bottom:92px solid transparent;border-top:108px solid var(--accent);transform-origin:top;pointer-events:none;border-top-left-radius:12px;border-top-right-radius:12px}
      .pocket{border-left:160px solid #ffdfe3;border-right:160px solid #ffdfe3;border-bottom:96px solid #ffccd6;border-top:96px solid transparent;border-bottom-left-radius:12px;border-bottom-right-radius:12px}
      .letter{position:relative;background:#fff;width:86%;margin:0 auto;height:86%;top:6%;border-radius:10px;box-shadow:0 6px 28px rgba(0,0,0,0.08);font-family:'Dancing Script',cursive;padding:18px;overflow:hidden}
      .words{position:absolute;left:8%;width:84%;display:block;color:#6b2b44}
      .words.line1{top:6%;font-size:0.85rem;color:#9b2b55}
      .words.line2{top:28%;font-size:1.25rem;text-align:center}
      .words.line3{top:48%;font-size:1.15rem;text-align:center}
      .words.line4{top:68%;font-size:1.05rem;text-align:center}

      .open .flap{transform:rotateX(180deg);transition:transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);z-index:1}
      .close .flap{transform:rotateX(0);transition:transform 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.2s;z-index:5}
      .close .letter{transform:translateY(0) scale(1);transition:transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;z-index:1;opacity:0;}
      .open .letter{transform:translateY(-110px) scale(1.02);transition:transform 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.1s, opacity 0.3s ease 0.2s;z-index:2;opacity:1;}

      /* Add hover effect */
      #envelope:not(.open):hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 16px 50px rgba(232,74,102,0.35); }

      .controls {
        display: flex;
        gap: 16px;
        justify-content: center;
        margin: 28px 0;
        flex-wrap: wrap;
        padding: 8px;
      }

      .btn {
        --btn-bg: #ffffff;
        --btn-text: #faf5f7;
        --btn-hover-bg: #ffffff;
        --btn-active-bg: #f0f0f0;
        
        position: relative;
        border: 2px solid rgba(107, 43, 68, 0.2);
        background: var(--btn-bg);
        color: var(--btn-text);
        padding: 12px 28px;
        border-radius: 50px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        min-width: 110px;
        text-align: center;
        letter-spacing: 0.5px;
        transform: translateY(0);
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.2));
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 50px;
        z-index: -1;
        transform: scaleX(0);
        transform-origin: right;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        border-color: rgba(107, 43, 68, 0.4);
        color: var(--accent);
        background: var(--btn-hover-bg);
        opacity: 0.95;
      }

      .btn:hover::before {
        opacity: 1;
        transform: scaleX(1);
        transform-origin: left;
      }

      /* Primary button styles */
      .btn.primary {
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        color: white;
        border: none;
        box-shadow: 0 8px 24px rgba(232, 74, 102, 0.3);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        padding: 14px 32px;
        letter-spacing: 1px;
      }

      .btn.primary:hover {
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 14px 30px rgba(232, 74, 102, 0.4);
        background: linear-gradient(135deg, #e03a58, #ff7b95);
      }

      /* Focus state for accessibility */
      .btn:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(232, 74, 102, 0.4);
      }

      /* Add a subtle pulse animation on hover */
      @keyframes pulse {
        0% { transform: translateY(-3px) scale(1); }
        50% { transform: translateY(-3px) scale(1.03); }
        100% { transform: translateY(-3px) scale(1); }
      }

      .btn.primary:hover {
        animation: pulse 1.5s infinite;
      }

      #confetti{position:fixed;left:0;top:0;right:0;bottom:0;pointer-events:none;overflow:hidden;z-index:1000}
      .confetti-piece{position:absolute;width:10px;height:14px;opacity:0.95;border-radius:2px;transform:translateY(-10px);animation:confetti-fall 2.8s linear forwards}
      @keyframes confetti-fall{0%{transform:translateY(-10vh) rotate(0)}100%{transform:translateY(110vh) rotate(720deg);opacity:1}}

      /* responsive tweaks */
      @media (max-width:520px){
        #envelope{width:260px;height:170px}
        .flap{border-left:130px solid transparent;border-right:130px solid transparent;border-top:92px solid var(--accent)}
        .pocket{border-left:130px solid #ffdfe3;border-right:130px solid #ffdfe3}
        .title{font-size:28px}
      }

      /* small helper for typing cursor */
      .typing-cursor{display:inline-block;width:8px;height:20px;background:#e84a66;margin-left:6px;border-radius:3px;vertical-align:middle;animation:blink 1s steps(2) infinite}
      @keyframes blink{50%{opacity:0}}

      /* Cute animated bunny styles */
      .doll{display:flex;align-items:center;justify-content:center;margin:12px auto 0;max-width:200px;filter:drop-shadow(0 8px 16px rgba(0,0,0,0.08))}
      .doll-body{position:relative;width:140px}

      .doll.bunny .ear{width:28px;height:70px;background:linear-gradient(180deg,#ffc0e0,#ffb0d9);border-radius:50%;position:absolute;top:-24px;box-shadow:inset -2px 0 6px rgba(0,0,0,0.05), 0 4px 8px rgba(0,0,0,0.08);opacity:0.9}
      .doll.bunny .ear.left{left:16px;transform:rotate(-12deg)}
      .doll.bunny .ear.right{right:16px;transform:rotate(12deg)}
      .doll.bunny .ear::before{content:'';position:absolute;top:8px;left:50%;transform:translateX(-50%);width:12px;height:50px;background:#ffe5f0;border-radius:50%;opacity:0.85}
      .doll.bunny .ear::after{content:'';position:absolute;top:12px;left:50%;transform:translateX(-50%);width:8px;height:35px;background:linear-gradient(90deg,transparent,#ffd1e3);border-radius:50%;opacity:0.6}

      .doll.bunny .head{width:92px;height:92px;background:linear-gradient(180deg,#ffd9e8,#ffb8d9);border-radius:50%;margin:0 auto;position:relative;box-shadow:0 6px 18px rgba(233,74,102,0.15), inset -4px -4px 12px rgba(0,0,0,0.08);transform-origin:center}

      /* eyebrows for more expression */
      .doll.bunny .eyebrow{width:18px;height:3px;background:#9b2b55;border-radius:2px;position:absolute;top:30px;transform:rotate(-20deg)}
      .doll.bunny .eyebrow.left{left:20px}
      .doll.bunny .eyebrow.right{right:20px;transform:rotate(20deg)}
      .doll.bunny.love .eyebrow.left{animation:eyebrow-scrunch-left .3s ease forwards}
      .doll.bunny.love .eyebrow.right{animation:eyebrow-scrunch-right .3s ease forwards}
      @keyframes eyebrow-scrunch-left{0%{transform:rotate(-20deg)}100%{transform:rotate(-8deg) translateY(-2px)}}
      @keyframes eyebrow-scrunch-right{0%{transform:rotate(20deg)}100%{transform:rotate(8deg) translateY(-2px)}}

      /* eye pupils for realism */
      .doll.bunny .eye{width:11px;height:11px;background:#60203a;border-radius:50%;position:absolute;top:36px;box-shadow:inset -1px -1px 3px rgba(0,0,0,0.15);display:flex;align-items:center;justify-content:center}
      .doll.bunny .eye.left{left:26px}
      .doll.bunny .eye.right{right:26px}
      .doll.bunny .eye .pupil{width:6px;height:6px;background:#000;border-radius:50%;box-shadow:inset 0 1px 2px rgba(0,0,0,0.5);opacity:0.95}

      .doll.bunny .nose{width:8px;height:8px;background:#ffb8d9;border-radius:50%;position:absolute;top:52px;left:50%;transform:translateX(-50%)}

      /* subtle smiling mouth */
      .doll.bunny .mouth{width:30px;height:14px;position:absolute;left:50%;top:66px;transform:translateX(-50%);border-bottom:3px solid #9b2b55;border-radius:0 0 18px 18px;pointer-events:none}
      .doll.bunny .mouth.small{width:22px;top:68px}
      .doll.bunny.love .mouth{transform:translateX(-50%) translateY(-6px) scale(1.02);transition:transform .28s ease}
      .doll.bunny.wink .mouth{transform:translateX(-50%) translateY(2px) scaleX(1.05);transition:transform .18s ease}

      /* bigger smile when active */
      .doll.bunny.smile .mouth{width:44px;height:18px;border-bottom:4px solid #9b2b55;border-radius:0 0 28px 28px;transform:translateX(-50%) translateY(-8px) scale(1.06);transition:transform .28s ease, width .2s ease}

      .doll.bunny .blush{width:18px;height:12px;background:radial-gradient(circle,#ff9fd0,#ffb3d9);border-radius:50%;position:absolute;opacity:0.85}
      .doll.bunny .blush::before{content:'';position:absolute;width:18px;height:12px;background:radial-gradient(circle,#ff9fd0,#ffb3d9);border-radius:50%;right:18px;top:48px}
      .doll.bunny .blush::after{content:'';position:absolute;width:18px;height:12px;background:radial-gradient(circle,#ff9fd0,#ffb3d9);border-radius:50%;left:18px;top:48px}

      /* cheek highlights for more dimension */
      .doll.bunny .head::before{content:'';position:absolute;width:24px;height:8px;background:radial-gradient(ellipse at center,rgba(255,255,255,0.35),transparent);border-radius:50%;left:12px;top:48px}
      .doll.bunny .head::after{content:'';position:absolute;width:24px;height:8px;background:radial-gradient(ellipse at center,rgba(255,255,255,0.35),transparent);border-radius:50%;right:12px;top:48px}

      .doll.bunny .body{width:72px;height:60px;background:linear-gradient(180deg,#ffd9e8,#ffb8d9);border-radius:40%;margin:12px auto 0;box-shadow:inset 0 -4px 10px rgba(0,0,0,0.05), inset -3px 0 6px rgba(0,0,0,0.04), 0 4px 10px rgba(0,0,0,0.08)}

      .doll.bunny .body::before{content:'';position:absolute;width:100%;height:16px;background:radial-gradient(ellipse at center,rgba(255,255,255,0.25),transparent);border-radius:50%;bottom:-8px;left:0}

      .doll.bunny .paw{width:18px;height:24px;background:linear-gradient(180deg,#ffb8d9,#ffb0d9);border-radius:50% 50% 40% 40%;position:absolute;top:96px;box-shadow:0 2px 4px rgba(0,0,0,0.08)}
      .doll.bunny .paw.left{left:18px}
      .doll.bunny .paw.right{right:18px}

      /* toe pads on paws */
      .doll.bunny .paw::before{content:'';position:absolute;width:4px;height:3px;background:#ffb8d9;border-radius:50%;bottom:2px;left:3px;box-shadow:6px 0 0 #ffb8d9, 12px 0 0 #ffb8d9}
      .doll.bunny .paw::after{content:'';position:absolute;width:5px;height:4px;background:#ffb8d9;border-radius:50%;bottom:6px;left:50%;transform:translateX(-50%);box-shadow:0 -4px 0 -1px #ffb8d9}

      /* bunny affection animations */
      .doll.bunny.love .head{transform:translateY(-8px) scale(1.04) rotate(-2deg);transition:transform .3s ease}
      .doll.bunny.love .ear{transform-origin:50% 0;animation:earBounce .4s ease-in-out 3;transition:transform .3s ease}
      .doll.bunny.love .ear.right{animation:earBounceRight .4s ease-in-out 3}

      @keyframes earBounce{0%{transform:rotate(-12deg) scaleY(1)}50%{transform:rotate(-12deg) scaleY(0.95)}100%{transform:rotate(-12deg) scaleY(1)}}
      @keyframes earBounceRight{0%{transform:rotate(12deg) scaleY(1)}50%{transform:rotate(12deg) scaleY(0.95)}100%{transform:rotate(12deg) scaleY(1)}}

      .doll-hearts{position:relative;height:0;pointer-events:none}
      .doll-hearts .doll-heart{position:absolute;left:50%;transform:translateX(-50%);width:18px;height:16px;background:#ff6b9a;border-radius:6px;opacity:0;animation:heart-pop 1.6s ease forwards}
      .doll-hearts .doll-heart.small{width:12px;height:10px;animation-duration:1.2s}
      .doll-hearts .doll-heart:nth-child(1){animation-delay:0.1s}
      .doll-hearts .doll-heart:nth-child(2){animation-delay:0.35s}
      .doll-hearts .doll-heart:nth-child(3){animation-delay:0.65s}

      @keyframes heart-pop{
        0%{opacity:0;transform:translate(-50%,0) scale(.6) rotate(-15deg)}
        30%{opacity:1;transform:translate(-50%,-18px) scale(1.05) rotate(0deg)}
        100%{opacity:0;transform:translate(-50%,-140px) scale(.8) rotate(25deg)}
      }

      /* subtle breathing and blink */
      .doll .head{animation:breathe 3.6s ease-in-out infinite}
      @keyframes breathe{0%{transform:translateY(0)}50%{transform:translateY(-3px)}100%{transform:translateY(0)}}

      .doll .eye{animation:blink 4s steps(2) infinite}

      /* Blow-a-kiss hearts */
      .kiss-heart{position:fixed;pointer-events:none;font-size:20px;line-height:1;transform:translate(-50%,0);opacity:1;z-index:1200;will-change:transform,opacity}
      @keyframes kiss-fly{
        0%{transform:translate(-50%,0) scale(1);opacity:1}
        60%{opacity:1}
        100%{transform:translate(calc(-50% + var(--kx,0px)),-220px) scale(0.7);opacity:0}
      }

      .kiss-heart.play{animation-name:kiss-fly;animation-timing-function:cubic-bezier(.22,.9,.3,1);animation-fill-mode:forwards}
    </style>
  </head>
  <body>
    <main class="page">
      <div class="card">
        <h1 class="title">A Letter for You</h1>
        <p class="subtitle">Open it when you're ready ðŸ’Œ</p>

        <!-- Cute animated bunny expressing affection -->
        <div id="doll" class="doll bunny" aria-hidden="false">
          <div class="doll-body">
            <div class="ear left"></div>
            <div class="ear right"></div>
            <div class="head">
              <div class="eyebrow left" aria-hidden="true"></div>
              <div class="eyebrow right" aria-hidden="true"></div>
              <div class="eye left">
                <div class="pupil" aria-hidden="true"></div>
              </div>
              <div class="eye right">
                <div class="pupil" aria-hidden="true"></div>
              </div>
              <div class="nose"></div>
              <div class="mouth" aria-hidden="true"></div>
            </div>
            <div class="body"></div>
            <div class="paw left"></div>
            <div class="paw right"></div>
            <div class="tail" aria-hidden="true"></div>
          </div>
          <div class="doll-hearts" aria-hidden="true"></div>
        </div>

        <div class="envlope-wrapper">
          <div id="envelope" class="close" role="button" tabindex="0" aria-pressed="false" aria-label="Open love letter">
            <div class="front flap" aria-hidden="true"></div>
            <div class="front pocket" aria-hidden="true"></div>
            <div class="letter" aria-hidden="false">
              <div class="words line1" data-text="To: My Love">To: My Love</div>
              <div class="words line2" data-text="Dear you, you are so beautiful">Dear you, you are so beautiful</div>
              <div class="words line3" data-text="Every time I see you my world stops">Every time I see you my world stops</div>
              <div class="words line4" data-text="and my heart remembers where it belongs.">and my heart remembers where it belongs.</div>
            </div>
            
          </div>
        </div>

        <div class="controls">
          <button id="open" class="btn primary">Open</button>
          <button id="reset" class="btn">Close</button>
        </div>
      </div>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(document).ready(function () {
        var envelope = $("#envelope");
        var btn_open = $("#open");
        var btn_reset = $("#reset");
        var words = $(".words");
        var $doll = $("#doll");

        // Open handlers
        envelope.on("click", open);
        btn_open.on("click", open);
        btn_reset.on("click", close);

        // keyboard accessibility: Enter toggles
        envelope.on("keydown", function (e) {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            if (envelope.hasClass("open")) close(); else open();
          }
        });

        function open() {
          envelope.addClass("open").removeClass("close");
          envelope.attr("aria-pressed", "true");
          startTyping();
          // doll affection animation
          var $doll = $("#doll");
          if ($doll.length) {
            $doll.addClass('love');
            $doll.addClass('smile');
            // create 3 hearts
            var hearts = $doll.find('.doll-hearts');
            hearts.empty();
            for (var i=0;i<3;i++){
              var h = document.createElement('div');
              h.className = 'doll-heart' + (i===1? ' small':'');
              hearts.append(h);
            }
            // clear hearts after animation
            setTimeout(function(){ hearts.empty(); $doll.removeClass('love'); }, 2200);
          }
        }

        function close() {
          envelope.addClass("close").removeClass("open");
          envelope.attr("aria-pressed", "false");
          resetTyping();
          // stop doll affection
          var $doll = $("#doll");
          if ($doll.length) { $doll.removeClass('love'); $doll.removeClass('smile'); $doll.find('.doll-hearts').empty(); }
        }

        // Typing effect across .words using their data-text attribute
        var typingTimers = [];
        function startTyping() {
          resetTyping();
          var delay = 450; // initial delay before first line
          words.each(function (i, el) {
            var $el = $(el);
            var text = $el.attr('data-text') || $el.text();
            $el.text('');
            (function($el, text, startDelay){
              var timer = setTimeout(function(){
                typeChars($el, text, 0);
              }, startDelay);
              typingTimers.push(timer);
            })($el, text, delay + i * 900);
          });
        }

        function typeChars($el, text, idx) {
          if (idx <= text.length) {
            $el.text(text.slice(0, idx));
            var next = 35 + Math.random() * 25;
            var t = setTimeout(function(){ typeChars($el, text, idx+1); }, next);
            typingTimers.push(t);
          }
        }

        function resetTyping() {
          typingTimers.forEach(function(t){ clearTimeout(t); });
          typingTimers = [];
          words.each(function(i,el){ $(el).text($(el).attr('data-text') || ''); });
        }
      });
    </script>
  </body>
</html>
